---
layout: post
title:numpy基础4 广播和数组操作
date: 2020-02-03
tag: 机器学习
---


```python
import numpy as np
```


```python
#numpy 的数学运算就跟普通的标量元素的运算一样，自动广播
```


```python
a = np.arange(10).reshape(2,5)
a
```




    array([[0, 1, 2, 3, 4],
           [5, 6, 7, 8, 9]])




```python
a*10                            #与标量值运算，标量值就会广播
```




    array([[ 0, 10, 20, 30, 40],
           [50, 60, 70, 80, 90]])




```python
a + a                           #与相同形状的array运算，对应元素进行运算
```




    array([[ 0,  2,  4,  6,  8],
           [10, 12, 14, 16, 18]])




```python
a*a
```




    array([[ 0,  1,  4,  9, 16],
           [25, 36, 49, 64, 81]])




```python
a1 = np.array([1,2,3,4,5])
```


```python
a2 = a + a1
a2
```




    array([[ 1,  3,  5,  7,  9],
           [ 6,  8, 10, 12, 14]])




```python
a3 = [[2],
      [3]]
```

注意此处的广播操作


```python

a4 = a +a3
a4
```




    array([[ 2,  3,  4,  5,  6],
           [ 8,  9, 10, 11, 12]])




```python
#转置和重塑
```


```python
a4.T
```




    array([[ 2,  8],
           [ 3,  9],
           [ 4, 10],
           [ 5, 11],
           [ 6, 12]])




```python
a4.transpose()  #可以对高维数组进行转置
```




    array([[ 2,  8],
           [ 3,  9],
           [ 4, 10],
           [ 5, 11],
           [ 6, 12]])




```python
np.dot(a4.T,a4)                     #矩阵的內积
```




    array([[ 68,  78,  88,  98, 108],
           [ 78,  90, 102, 114, 126],
           [ 88, 102, 116, 130, 144],
           [ 98, 114, 130, 146, 162],
           [108, 126, 144, 162, 180]])




```python
a = np.arange(24).reshape(2,3,4)
a
```




    array([[[ 0,  1,  2,  3],
            [ 4,  5,  6,  7],
            [ 8,  9, 10, 11]],
    
           [[12, 13, 14, 15],
            [16, 17, 18, 19],
            [20, 21, 22, 23]]])




```python
a.transpose(1,0,2)
```




    array([[[ 0,  1,  2,  3],
            [12, 13, 14, 15]],
    
           [[ 4,  5,  6,  7],
            [16, 17, 18, 19]],
    
           [[ 8,  9, 10, 11],
            [20, 21, 22, 23]]])




```python
a = np.arange(6).reshape(2,3)
a
```




    array([[0, 1, 2],
           [3, 4, 5]])




```python
a.T
```




    array([[0, 3],
           [1, 4],
           [2, 5]])




```python
a
```




    array([[0, 1, 2],
           [3, 4, 5]])




```python
for x in a:
    print(x)
```

    [0 1 2]
    [3 4 5]



```python
对数据进行扁平化
```


```python
for x in a.flat:
    print(x)
```

    0
    1
    2
    3
    4
    5



```python
a.flatten() #数据扁平化 但是是潜拷贝
```




    array([0, 1, 2, 3, 4, 5])




```python
b = a.ravel() #数据扁平化 但是是深拷贝
```


```python
b[2] = 1000
```


```python
a
```




    array([[   0,    1, 1000],
           [   3,    4,    5]])




```python

```
