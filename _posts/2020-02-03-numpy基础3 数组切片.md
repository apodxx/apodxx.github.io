---
layout: post
title: numpy基础3 数组切片
date: 2020-02-03
tag: 机器学习
---



一维数组切片，跟python列表很像


```python
import numpy as np
```


```python
arr = np.arange(10)
```


```python
arr[5]
```




    5




```python
arr[5:8]
```




    array([5, 6, 7])




```python
arr[5:8] = 12     #自动广播到整个选区，这里是原始数组的视图，数据不会被复制，直接反应到原始数据上
```


```python
arr
```




    array([ 0,  1,  2,  3,  4, 12, 12, 12,  8,  9])




```python
arr_slice = arr[5:8]
```


```python
arr_slice[1] = 10000
```


```python
arr
```




    array([    0,     1,     2,     3,     4,    12, 10000,    12,     8,     9])




```python
arr_slice[:] = 20000
```


```python
arr      #numpy是用来处理大数据，如果复制来复制去，内存和性能就会下降
```




    array([    0,     1,     2,     3,     4, 20000, 20000, 20000,     8,     9])




```python
arr_an = arr[5:8].copy()
```


```python
arr_an
```




    array([20000, 20000, 20000])




```python
arr_an[:] = 30000
arr_an
```




    array([30000, 30000, 30000])




```python
arr
```




    array([    0,     1,     2,     3,     4, 20000, 20000, 20000,     8,     9])




```python
arr[:6]
```




    array([    0,     1,     2,     3,     4, 20000])



从头开始到6 步长为2


```python
arr[:6:2]
```




    array([0, 2, 4])



将数组倒置


```python
arr[::-1]
```




    array([    9,     8, 20000, 20000, 20000,     4,     3,     2,     1,     0])



高维数组的切片


```python
arr2 = np.arange(24).reshape(2,3,4)    
```


```python
arr2     #理解高维
```




    array([[[ 0,  1,  2,  3],
            [ 4,  5,  6,  7],
            [ 8,  9, 10, 11]],
    
           [[12, 13, 14, 15],
            [16, 17, 18, 19],
            [20, 21, 22, 23]]])




```python
arr2[0]
```




    array([[ 0,  1,  2,  3],
           [ 4,  5,  6,  7],
           [ 8,  9, 10, 11]])




```python
arr2[1]
```




    array([[12, 13, 14, 15],
           [16, 17, 18, 19],
           [20, 21, 22, 23]])




```python
arr2[1][0]
```




    array([12, 13, 14, 15])




```python
arr2[1][0][2]
```




    14




```python
arr2[1,0,2]
```




    14




```python
arr2[1,0,:]
```




    array([12, 13, 14, 15])




```python
arr2[1,0,1:]
```




    array([13, 14, 15])




```python
arr2[:,0,2]
```




    array([ 2, 14])




```python
arr2[1,:2,2:]
```




    array([[14, 15],
           [18, 19]])




```python
arr2[:,0,2] = 100
```


```python
arr2
```




    array([[[  0,   1, 100,   3],
            [  4,   5,   6,   7],
            [  8,   9,  10,  11]],
    
           [[ 12,  13, 100,  15],
            [ 16,  17,  18,  19],
            [ 20,  21,  22,  23]]])



布尔型索引


```python
arr2[arr2 == 15]
```




    array([15])




```python
arr2[arr2 != 15]
```




    array([  0,   1, 100,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,
            13, 100,  16,  17,  18,  19,  20,  21,  22,  23])




```python
arr2[arr2>20]    #布尔型索引的长度必须跟轴一致
```




    array([100, 100,  21,  22,  23])




```python
arr2[(arr2>20)|(arr2<10)]      # &  |    不是and和or
```




    array([  0,   1, 100,   3,   4,   5,   6,   7,   8,   9, 100,  21,  22,  23])




```python
arr2[(arr2>10)&(arr2%2 == 0)]
```




    array([100,  12, 100,  16,  18,  20,  22])




```python
arr2[arr2>10] = 100
```


```python
arr2
```




    array([[[  0,   1, 100,   3],
            [  4,   5,   6,   7],
            [  8,   9,  10, 100]],
    
           [[100, 100, 100, 100],
            [100, 100, 100, 100],
            [100, 100, 100, 100]]])




```python
arr2[[1,0]]   #以特定顺序选取子集
```




    array([[[100, 100, 100, 100],
            [100, 100, 100, 100],
            [100, 100, 100, 100]],
    
           [[  0,   1, 100,   3],
            [  4,   5,   6,   7],
            [  8,   9,  10, 100]]])




```python
arr2[0][[2,0,1]]
```




    array([[  8,   9,  10, 100],
           [  0,   1, 100,   3],
           [  4,   5,   6,   7]])




```python

```
